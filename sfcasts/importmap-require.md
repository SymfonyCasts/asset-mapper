# importmap:require - 3rd Party JS Libs

Coming soon...

So, in our code we can use import statements, relative imports, classes, everything that we're normally used to. So we kind of just code. But the next question is, what about third-party packages? Well, as we mentioned earlier, you can actually import things via a full URL, like import underscore from, and then I'm going to paste in the same CDN URL that we used earlier. And then you can say something like underscore.camelCase, mix.describe. And if we refresh and check the console, that is going to work. I just don't like it. I don't want to have to include this crazy URL everywhere. What happens if we upgrade? And I have this in 10 different files. So not a great solution. Fortunately, there's a really nice way to solve this with import maps. So if we were using a build system like Webpack, we would just say yarn add lodash, or npm add lodash. And in fact, for JavaScript files, we can do that same thing. So over in the terminal, I'm going to open a new terminal, and we're going to run bin console app import map require, and then the name of the npm package we want, lodash. And done. As you can see, it apparently just added lodash to import map.php, and says we can now use the package like normal. So check this out. We can literally now just say import underscore from lodash like we normally would, and everything works just fine. How? Well, when we ran the command, it made just one small change. It added this here. So it's not a lot of magic. It went out to the JS deliver CDN, found the latest version, and then it's added a new lodash key here set to that URL. The end result of that is nothing more than, if we look on the page source, we have a new lodash entry inside of our import map. So again, this is just a browser thing. When our browser sees import lodash, it looks inside of our import map for lodash, and this is actually the URL that it goes to. So using third party packages is really, really simple with the import map system. Now one thing you'll notice is I'm not getting auto completion here.  It says module not installed, and if I say underscore dot something, it doesn't really work. It's auto completing camel case, but only because I'm using that down there. So this is something I hope is supported better in PagerStorm soon. There is a workaround for this, but it's kind of manual. So if I copy this package here, and I go into my any file and add a script tag for it, I'm not actually going to keep that script tag, but now if I hit alt enter, I can have an option to download that library. What that's going to do is that's going to download it into this little external libraries spot down here, where it should. Where did it go? Let me try that again. Downloaded library. Let me open up my JavaScript libraries here. So I'm going to search for JavaScript, languages, JavaScript, libraries. Here we go. I actually had this... I should remove that. Oh shoot. There we go. So I'm going to hit download. What that's going to do is it's going to download it down into your external libraries down here, lodash. We don't actually need this thing anymore, but it now means an app.js. It's still going to kind of underline it as if it doesn't know what it is, but in fact you do have underscore dot whatever, camel case, join from, reduce, all kinds of stuff. All right. For example, tail is from Lodash. And it will now auto-complete those things for you. So hopefully that support gets a little better. There's a workaround for it. It just needs to be made smoother. Now what about like updating things inside of import map, like if new versions come out? There is a command for that. It's not quite as flexible as it could be yet, but you can run bing console import map update. And what that's going to do is it's going to go through all of your packages inside of here and make sure they're updated to the latest version. So this is already the latest version. If I change that to like.19 and went back, it's going to pop it back up to.21. And finally, if you don't want to rely on the CDN, you don't have to.  So the way to do that is when you import map require Lodash, you can pass a down, dash, dash, download option. Now what this does is it still has like the URL inside of there, kind of the source URL of where it came from, but actually downloaded it into our assets vendor directory. So this downloaded two is pointing to the logical path to that. So thanks to this, that downloaded two, let me go and refresh the page and look at the page source. Our import map is now pointing to that local file instead, and we're no longer relying on the CDN. Now, of course, one obvious question is, do I commit this vendor Lodash file? And the answer is yes. That's the only way for us to really version that file. So you will commit that to your repository. That's it for third party packages. Now, sometimes instead of importing a specific file, you might want to import just a whole package. So you might want to import like a specific file like that. Let's talk about how we can do that next.
